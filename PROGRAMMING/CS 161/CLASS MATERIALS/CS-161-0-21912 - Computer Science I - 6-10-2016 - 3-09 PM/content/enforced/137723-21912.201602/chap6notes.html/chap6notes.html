<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>Untitled document</title>
</head>
<body>
<p>Overview<br />--------<br /><br />All of the code that you've written so far has been in the<br />"main" function and has relied on functions that have been provided by<br />the language. In this chapter we will introduce the idea of "user-defined"<br />functions. <br /><br />Functions give you a way to decompose your program into smaller,<br />manageable units.&nbsp; It is possible to put your entire program in a<br />single function but it is nearly always a bad idea. &nbsp;<br /><br />Predefined Functions<br />--------------------<br /><br />Remember from algebra days that a function, mathematically speaking,<br />took in a value, did some computation, and returned a value.&nbsp; That is<br />just what functions do in C++ (that's why they are called functions). &nbsp;<br /><br />To get you used to this idea look at some of the predefined<br />functions.&nbsp; For example, the sqrt() function does a square root<br />calculation.&nbsp; You pass in a value and it computes the square root.<br /><br />Here is an example:<br /><br />double result;<br />result = sqrt(17.5);<br /><br />Whenever you want to use a predefined function you need to make sure<br />to include the appropriate header file (*.h).<br /><br />User-Defined Functions<br />----------------------<br /><br />Advantages of creating your own functions:<br />- easier to write your programs<br />- easier to debug<br />- easier to reuse<br /><br />There are two types of functions:<br />- value-returning<br />- void<br /><br />A "value-returning" function returns a value while a "void" function<br />doesn'.&nbsp; We will spend most of our time dealing with value-returning<br />functions.<br /><br />Value-Returning Functions<br />-------------------------<br /><br />Every function has 5 elements:<br /><br />- the name of the function<br />- the number of parameters (could be 0)<br />- the types of the parameters<br />- the type of the returned value<br />- the code for the function<br /><br />The first 4 items are a part of the "heading" of the function while<br />the 5th item is the body.&nbsp; All 5 of these items are the definition.<br /><br />The "formal parameter" is the name and type of the parameter when it<br />is in the heading.&nbsp; That parameter because a variable that can be used<br />in the function body.&nbsp; Think of it as a "predeclared variable".<br /><br />When a function is called there must be a value for each formal<br />parameter.&nbsp; For example, suppose I have the following function:<br /><br />int myfunc(int x, int y) {<br />&nbsp; int z = x + y;<br />&nbsp; return(y);<br />}<br /><br />The name of this function is "myfunc".&nbsp; It has two parameters.&nbsp; Both<br />are integers.&nbsp; It returns an integer type.&nbsp; And the body of the<br />function is two lines long.<br /><br />A call to this function looks like this:<br /><br />.... // some other code<br /><br />myfunc(12, 17);<br /><br />.... // some other code<br /><br />Notice that since the function expects two integers, we have to<br />provide two integers&nbsp; when we call it.<br /><br />Those two integers get copied into the formal parameters x and y.<br />Then they can be used in the function body.<br /><br />The values "12" and "17" are the "actual parameters"<br /><br />The return Statement<br />--------------------<br /><br />As indicated above, functions can return values.&nbsp; In the body of the<br />function this is done with the "return" statement.&nbsp; Consider this<br />function:<br /><br />int doublenumber(int x) {<br />&nbsp; int dbl = x * 2;<br />&nbsp; return(dbl);<br />}<br /><br />A key point here is that the type of the value returned (in the return statement)<br />must match the type of the function in the heading.<br /><br />Early Returns<br />-------------<br /><br />On this point I strongly disagree with the book.&nbsp; The section on<br />returns (in the book) suggests that it is best to use the return<br />statement as soon as you have a computed value.&nbsp; This is not good at<br />all.&nbsp; In nearly all cases (99.9%) it is better to have a single return<br />statement at the end of the function.<br /><br />The object about there being extra variables is bogus.&nbsp; Every modern<br />compiler (by modern I mean within the last 30 years) will optimize<br />away the extra variables so the final exe code will be the same.<br /><br />Let's use an example to demonstrate one of the negative aspects of<br />early returns.&nbsp; Suppose you have the task to write a function that<br />returns the ticket price of a movie.&nbsp; The price is based on the age<br />and time of day.&nbsp; To make it easier we'll say the time of day is a<br />boolean with false = "afternoon" and true = "evening".&nbsp; The pricing<br />chart looks like this:<br /><br />afternoon fees:<br />&nbsp; age &lt;= 16&nbsp;&nbsp; &nbsp;$5<br />&nbsp; age &gt;= 65&nbsp;&nbsp; &nbsp;$7.50<br />&nbsp; all others&nbsp;&nbsp; &nbsp;$10.00<br /><br />evening fees are the afternoon fee + 2.50.<br /><br />The books suggestion would end up with code like this:<br /><br />double price(int age, bool tod) {<br /><br />&nbsp; if ((tod == false) &amp;&amp; (age &lt;= 16)) {<br />&nbsp;&nbsp;&nbsp; return 5;<br />&nbsp; }<br />&nbsp; if ((tod == false) &amp;&amp; (age &gt;= 65)) {<br />&nbsp;&nbsp;&nbsp; return 7.50;<br />&nbsp; }<br />&nbsp; if (tod == false) {<br />&nbsp;&nbsp;&nbsp; return 10;<br />&nbsp; }<br />&nbsp; if ((tod == true) &amp;&amp; (age &lt;= 16)) {<br />&nbsp;&nbsp;&nbsp; return 7.50;<br />&nbsp; }<br />&nbsp; if ((tod == false) &amp;&amp; (age &gt;= 65)) {<br />&nbsp;&nbsp;&nbsp; return 10;<br />&nbsp; }<br />&nbsp; if (tod == false) {<br />&nbsp;&nbsp;&nbsp; return 12.50;<br />&nbsp; }<br />}<br /><br />My version of this would look like this:<br /><br />double price(int age, bool tod) {<br /><br />&nbsp; double p = 10.00;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br /><br />&nbsp; if (age &lt;= 16) {<br />&nbsp;&nbsp;&nbsp; p = 5;<br />&nbsp; } else if (age &gt;= 65) {<br />&nbsp;&nbsp;&nbsp; p = 7.50;<br />&nbsp; }<br /><br />&nbsp; if (tod == true) {<br />&nbsp;&nbsp;&nbsp; p = p + 2.50;<br />&nbsp; }<br /><br />&nbsp; return(p);<br />}<br /><br />Now consider that after completing this function you realize that you<br />want to print out the price before returning it.&nbsp; The changes to the<br />book version require adding six "cout &lt;&lt; ???" statements.&nbsp; The changes<br />to my version requiring adding one "cout &lt;&lt; p" statement.<br /><br />In the end my version is easier to understand, debug, and modify.&nbsp; In<br />my professional experience I have seen early returns responsible for<br />dozens of bugs in code.&nbsp; It is best to not use them!<br /><br />Flow of Control<br />---------------<br /><br />Function calls are really another flow-control statement (like<br />selection and repetition).&nbsp; When a function is called, the program<br />remembers where it was called from and then when the function exits<br />execution continues back from the calling point.&nbsp; If statements in a<br />function body call another function then the program is now<br />remembering two places to go back to.&nbsp; This can continue to any<br />arbitrary number of calls inside of calls.&nbsp; This list of "return<br />locations" is called a function call stack.&nbsp; We will frequently refer<br />to the function call stack in our discussions.</p>
</body>
</html>